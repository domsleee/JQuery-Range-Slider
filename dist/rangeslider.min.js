!function(){function a(a,b){this.$el=a,this.id=this.$el.attr("id"),this.size=1,this.ratio=.3,this.multiple=1.2,this.borderSize=.4,this.lastCoordinates={x:0,y:0},this.percentage=30,this.disabled=!1,this.fgColour="#04B404",this.bgColour="#ddd",this.borderColour="rgba(0, 0, 0, 0.2)",this.pollLimit=!1,this.lastPoll=0;for(prop in b)b.hasOwnProperty(prop)&&(this[prop]=b[prop]);this.percentage/=100,this.main()}String.prototype.toFloat=function(){var a=this.split(" ")[0],b=Number(a.replace("px","")),c=Number(a.replace("em",""));return isNaN(b)?!isNaN(c)&&c:b},a.prototype={main:function(){this.construct(),this.events(),this.setBar(this.percentage)},construct:function(){this.$el.addClass("rangeslider"),this.disabled&&this.$el.addClass("disabled");var a="background-color:"+this.fgColour+";",b={rangeouter:"background-color:"+this.bgColour+";",rangeinner:a,rangeselector:a};if(this.size){var c=2*this.borderSize+this.size*this.multiple;this.$el.css("height",c+"em");var d=this.size*this.ratio,e=(c-d)/2;b.rangeouter+="height:"+d+"em;margin:"+e+"em 0;",b.rangeinner+="height:"+d+"em;margin:"+e+"em 0;"}b.rangeselector+="border-radius:"+this.size*this.multiple+"em;",this.$el.append($("<div>",{class:"rangeouter",style:b.rangeouter})).append($("<div>",{class:"rangeinner",style:b.rangeinner})).append($("<div>",{class:"rangeselector",style:b.rangeselector})),this.$rangeinner=this.$el.find("div.rangeinner"),this.$rangeouter=this.$el.find("div.rangeouter"),this.$rangeselector=this.$el.find("div.rangeselector"),this.setState("inactive")},events:function(){var a=this;this.$el.on("touchstart mousedown",function(b){if(b.preventDefault(),!a.disabled){a.setState("active");var c=a.getCoordinates(b);a.fixBar(c);a.lastCoordinates=c;var d=a.getPercentage(a.lastCoordinates);a.percentage=d,"function"==typeof a.onDown&&a.onDown(b,100*d)}});var b=function(b){if(b.preventDefault(),a.active===!0){var c=a.getCoordinates(b);a.fixBar(c);if(a.lastCoordinates=c,"function"==typeof a.onMove){var d=window.performance.now(),e=d-a.lastPoll,f=a.pollLimit?1e3/a.pollLimit:-1;if(e>f){var g=a.getPercentage(a.lastCoordinates);a.percentage=g,a.onMove(b,100*g),a.lastPoll=d}}}},c=function(b){if(a.active===!0){a.setState("inactive"),a.startingX=!1;var c=a.getPercentage(a.lastCoordinates);a.percentage=c,"function"==typeof a.onUp&&("function"==typeof a.onMove&&a.onMove(b,100*c),a.onUp(b,100*c))}};this.$el.on("touchmove",b),this.$el.on("touchend",c),$(document).on("mousemove",b),$(document).on("mouseup mouseleave",c)},getCoordinates:function(a){if(ret={x:!1,y:!1},touches=a.originalEvent.touches||!1,touches){var b=touches[0];ret.x=b.pageX,ret.y=b.pageY}else a.clientX&&(ret.x=a.clientX,ret.y=a.clientY);return ret},fixBar:function(a){var b=this.getPercentage(a);this.setBar(b)},getPercentage:function(a){var b=a.x-this.$el[0].offsetLeft;b<0&&(b=0),b>this.$el.width()&&(b=this.$el.width());var c=b/this.$el.width();return c},setBar:function(a){if(a<0||a>1)throw new Error("RangeSlider: setBar expects a percentage between 0-1, ",a,"given");this.$el.width()*a;this.$rangeinner.css("width",100*a+"%"),this.$rangeselector.css("left",100*a+"%")},setState:function(a){var b={};this.$rangeselector.css("left").toFloat();"active"===a?(this.active=!0,b.border=this.borderSize+"em solid "+this.borderColour,b.size=this.size*this.multiple+"em",b.top=0):(this.active=!1,b.border=this.borderSize+"em solid rgba(0, 0, 0, 0)",b.size=this.size+"em",b.top=this.size*(this.multiple-1)/2+"em"),b.marginLeft=-(this.borderSize+b.size.toFloat()/2)+"em",this.$rangeselector.css({border:b.border,width:b.size,height:b.size,top:b.top,marginLeft:b.marginLeft})},disable:function(){this.$el.addClass("disabled"),this.disabled=!0},enable:function(){this.$el.removeClass("disabled"),this.disabled=!1},setPercentage:function(a){if(a<0||a>100)throw new Error("RangeSlider: setPercentage expects a percentage between 0-100, ",a,"given");this.setBar(a/100)}},window.RangeSlider=a}();