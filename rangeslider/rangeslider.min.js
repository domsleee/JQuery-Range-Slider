!function(){function e(e,t){for(prop in this.$el=e,this.id=this.$el.attr("id"),this.size=1,this.ratio=.3,this.multiple=1.2,this.borderSize=.4,this.lastCoordinates={x:0,y:0},this.percentage=30,this.disabled=!1,this.fgColour="#04B404",this.bgColour="#ddd",this.borderColour="rgba(0, 0, 0, 0.2)",this.pollLimit=!1,this.lastPoll=0,t)t.hasOwnProperty(prop)&&(this[prop]=t[prop]);this.percentage/=100,this.main()}String.prototype.toFloat=function(){var e=this.split(" ")[0],t=Number(e.replace("px","")),i=Number(e.replace("em",""));return isNaN(t)?!isNaN(i)&&i:t},e.prototype={main:function(){this.construct(),this.events(),this.setBar(this.percentage)},construct:function(){this.$el.addClass("rangeslider"),this.disabled&&this.$el.addClass("disabled");var e="background-color:"+this.fgColour+";",t={rangeouter:"background-color:"+this.bgColour+";",rangeinner:e,rangeselector:e},i=2*this.borderSize+this.size*this.multiple;this.$el.css("height",i+"em");var s=this.size*this.ratio,r=(i-s)/2;t.rangeouter+="height:"+s+"em;margin:"+r+"em 0;",t.rangeinner+="height:"+s+"em;margin:"+r+"em 0;",t.rangeselector+="border-radius:"+this.size*this.multiple+"em;",this.$el.append($("<div>",{class:"rangeouter",style:t.rangeouter})).append($("<div>",{class:"rangeinner",style:t.rangeinner})).append($("<div>",{class:"rangeselector",style:t.rangeselector})),this.$rangeinner=this.$el.find("div.rangeinner"),this.$rangeouter=this.$el.find("div.rangeouter"),this.$rangeselector=this.$el.find("div.rangeselector"),this.setState("inactive")},events:function(){var e=this,t=function(t){if(t.preventDefault(),!(e.disabled||0!=t.button&&"touchstart"!=t.type)){e.setState("active");var i=e.getCoordinates(t);e.fixBar(i);e.lastCoordinates=i;var s=e.getPercentage(e.lastCoordinates);e.percentage=s,"function"==typeof e.onDown&&e.onDown(t,100*s)}},i=function(t){if("touchmove"!==t.type&&t.preventDefault(),!0===e.active){var i=e.getCoordinates(t);e.fixBar(i);if(e.lastCoordinates=i,"function"==typeof e.onMove){var s=window.performance.now();if(s-e.lastPoll>(e.pollLimit?1e3/e.pollLimit:-1)){var r=e.getPercentage(e.lastCoordinates);e.percentage=r,e.onMove(t,100*r),e.lastPoll=s}}}},s=function(t){if(!0===e.active){e.setState("inactive"),e.startingX=!1;var i=e.getPercentage(e.lastCoordinates);e.percentage=i,"function"==typeof e.onUp&&("function"==typeof e.onMove&&e.onMove(t,100*i),e.onUp(t,100*i))}};this.$el.on("touchstart",t),$(document).on("touchmove",i),$(document).on("touchend",s),this.$el.on("mousedown",t),$(document).on("mousemove",i),$(document).on("mouseup mouseleave",s)},getCoordinates:function(e){if(ret={x:!1,y:!1},touches=e.originalEvent.touches||!1,touches){var t=touches[0];ret.x=t.pageX,ret.y=t.pageY}else e.clientX&&(ret.x=e.clientX,ret.y=e.clientY);return ret},fixBar:function(e){var t=this.getPercentage(e);this.setBar(t)},getPercentage:function(e){var t=e.x-this.$el[0].getBoundingClientRect().x;return t<0&&(t=0),t>this.$el.width()&&(t=this.$el.width()),t/this.$el.width()},setBar:function(e){if(e<0||e>1)throw new Error("RangeSlider: setBar expects a percentage between 0-1, ",e,"given");this.$el.width();this.$rangeinner.css("width",100*e+"%"),this.$rangeselector.css("left",100*e+"%")},setState:function(e){var t={};this.$rangeselector.css("left").toFloat();"active"===e?(this.active=!0,t.border=this.borderSize+"em solid "+this.borderColour,t.size=this.size*this.multiple+"em",t.top=0):(this.active=!1,t.border=this.borderSize+"em solid rgba(0, 0, 0, 0)",t.size=this.size+"em",t.top=this.size*(this.multiple-1)/2+"em"),t.marginLeft=-(this.borderSize+t.size.toFloat()/2)+"em",this.$rangeselector.css({border:t.border,width:t.size,height:t.size,top:t.top,marginLeft:t.marginLeft})},disable:function(){this.$el.addClass("disabled"),this.disabled=!0},enable:function(){this.$el.removeClass("disabled"),this.disabled=!1},setPercentage:function(e){if(e<0||e>100)throw new Error("RangeSlider: setPercentage expects a percentage between 0-100, ",e,"given");this.setBar(e/100)}},window.RangeSlider=e}();